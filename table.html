<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Midnight Black Poker – Table</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>

    :root {
      --bg-main:#050509;
      --bg-secondary:#0c0c14;
      --bg-elevated:#10101b;
      --accent:#6f7aff;
      --accent-strong:rgba(111,122,255,0.85);
      --danger:#ff416f;
      --success:#35d49b;
      --text-main:#f5f5f5;
      --text-muted:#9a9aad;
      --border-soft:rgba(255,255,255,0.08);
      --shadow-soft:0 0 50px rgba(0,0,0,0.9);
    }

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      font-family: system-ui, -apple-system, "SF Pro Text", "Segoe UI", sans-serif;
      background: radial-gradient(circle at top,#151528 0,#050509 55%,#000 100%);
      color: var(--text-main);
      overflow-x:hidden;
    }

    .page { min-height:100vh; display:flex; flex-direction:column; }

    /* =======================================================
       HEADER
    ======================================================= */

    .topbar {
      padding:8px 12px 10px;
      background:linear-gradient(to bottom,rgba(5,5,10,0.96),rgba(5,5,10,0.85),transparent);
      border-bottom:1px solid rgba(255,255,255,0.05);
      backdrop-filter:blur(14px);
      position:sticky; top:0; z-index:10;
    }

    .topbar-row { display:flex; justify-content:space-between; gap:16px; }

    .logo-mark {
      width:26px; height:26px; border-radius:50%;
      background:conic-gradient(from 210deg,#000,#151528,#6f7aff,#000);
      box-shadow:0 0 12px rgba(111,122,255,0.7);
      position:relative;
    }

    .logo-mark::after {
      content:"";
      position:absolute; inset:26%;
      border:1px solid rgba(255,255,255,0.4);
      border-radius:50%;
      background:radial-gradient(circle,rgba(255,255,255,0.2),transparent);
    }

    .topbar-title-block { display:flex; flex-direction:column; gap:2px; }
    .topbar-main { font-size:13px; letter-spacing:0.18em; text-transform:uppercase; }
    .topbar-sub  { font-size:11px; letter-spacing:0.2em; text-transform:uppercase; color:var(--text-muted); }

    .topbar-right { display:flex; flex-direction:column; gap:4px; align-items:flex-end; }
    .topbar-actions { display:flex; gap:6px; }
    .pill { padding:4px 10px; border-radius:999px; background:rgba(10,10,20,0.85); border:1px solid rgba(255,255,255,0.12); font-size:11px; }

    /* КНОПКИ */

    .btn { border-radius:999px; padding:6px 12px; cursor:pointer; font-size:12px; }

    .btn-join {
      border:1px solid rgba(53,212,155,0.65);
      background:radial-gradient(circle at 0 0,rgba(53,212,155,0.35),#073321);
      color:#e8fff7;
      box-shadow:0 0 16px rgba(53,212,155,0.8);
    }

    .btn-leave {
      border:1px solid rgba(255,65,111,0.55);
      background:radial-gradient(circle at 0 0,rgba(255,65,111,0.2),transparent);
      color:#ffe9f1;
      box-shadow:0 0 14px rgba(255,65,111,0.4);
    }

    .btn-icon {
      border:1px solid rgba(255,255,255,0.18);
      color:var(--text-muted);
      background:rgba(255,255,255,0.06);
      padding:6px;
      font-size:14px;
    }

    /* =======================================================
       TABLE WRAP
    ======================================================= */

    .main { flex:1; display:flex; gap:10px; padding:10px; }

    .table-wrap {
      border-radius:24px;
      background:radial-gradient(circle at top,#18182b,#050509 65%);
      border:1px solid rgba(255,255,255,0.07);
      padding:12px;
      position:relative;
      flex:1;
    }

    .dot-live {
      width:8px; height:8px; border-radius:50%;
      background:var(--success);
      box-shadow:0 0 10px rgba(53,212,155,0.9);
      margin-top:3px;
    }

    /* =======================================================
       TABLE SURFACE
    ======================================================= */

    .poker-table {
      width:100%; max-width:820px; margin:auto;
      aspect-ratio:2.3/1;
      border-radius:999px;
      position:relative;
      overflow:hidden;
      background:
        radial-gradient(circle at 50% -40%,rgba(255,255,255,0.16),transparent 60%),
        radial-gradient(circle at 50% 130%,rgba(111,122,255,0.24),#050509 70%);
      box-shadow:0 0 26px rgba(111,122,255,0.6);
    }

    .poker-table-inner {
      position:absolute; inset:14%;
      border-radius:999px;
      background:
        radial-gradient(circle at 50% 0,rgba(255,255,255,0.06),transparent 65%),
        radial-gradient(circle at 50% 130%,rgba(111,122,255,0.22),#050509 80%);
      border:1px solid rgba(255,255,255,0.14);
    }

    #pot { position:absolute; top:50%; left:50%; transform:translate(-50%,-60px); color:#fff; font-size:12px; display:none; }
    #board { display:flex; gap:6px; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); }

    .card { width:28px; height:38px; border-radius:6px; background:radial-gradient(circle,#fff,#e4e4f4); border:1px solid rgba(0,0,0,0.08); position:relative; }
    .card-rank { position:absolute; left:4px; top:3px; font-size:11px; font-weight:600; }
    .card-suit { position:absolute; right:4px; bottom:3px; font-size:9px; }
    .card.red   { color:#d41245; }
    .card.black { color:#16162a; }

    /* =======================================================
       SEATS
    ======================================================= */

    #players { position:absolute; inset:0; }

    .seat {
      position:absolute; padding:4px 10px;
      display:flex; gap:6px; align-items:center;
      border-radius:999px;
      background:rgba(5,5,15,0.96);
      border:1px solid rgba(255,255,255,0.14);
      font-size:11px;
    }

    .seat-avatar { width:18px; height:18px; background:radial-gradient(circle,rgba(111,122,255,0.45),#050509); border-radius:50%; border:1px solid rgba(255,255,255,0.3); display:flex; align-items:center; justify-content:center; }

    .seat-1 { top:0%;   left:50%; transform:translate(-50%,0); }
    .seat-2 { top:24%;  right:2%;  transform:translate(0,-50%); }
    .seat-3 { bottom:24%; right:2%; transform:translate(0,50%); }
    .seat-4 { bottom:0%; left:50%; transform:translate(-50%,0); }
    .seat-5 { bottom:24%; left:2%;  transform:translate(0,50%); }
    .seat-6 { top:24%;  left:2%;   transform:translate(0,-50%); }

    /* =======================================================
       DEALER CHIP — ВСЕГДА РЯДОМ СО СТУЛОМ, НИКОГДА НЕ НА НЁМ
    ======================================================= */

    .dealer-chip {
      width:18px; height:18px;
      border-radius:50%;
      background:rgba(5,5,15,0.95);
      border:1px solid #fff;
      box-shadow:0 0 12px rgba(111,122,255,0.7);
      position:absolute; color:#fff; font-size:10px;
      display:flex; align-items:center; justify-content:center;
      pointer-events:none;
    }

    /* фишка — слева от стула, либо справа, в зависимости от стороны */

    .dealer-1 { top:0%; left:50%; transform:translate(-50%,-40px); }
    .dealer-2 { top:24%; right:2%; transform:translate(26px,-50%); }
    .dealer-3 { bottom:24%; right:2%; transform:translate(26px,50%); }
    .dealer-4 { bottom:0%; left:50%; transform:translate(-50%,40px); }
    .dealer-5 { bottom:24%; left:2%; transform:translate(-26px,50%); }
    .dealer-6 { top:24%; left:2%; transform:translate(-26px,-50%); }

    /* =======================================================
       HERO + ACTIONS
    ======================================================= */

    .bottom-panel { margin-top:12px; padding:10px; border-radius:18px; background:rgba(5,5,15,0.92); border:1px solid rgba(255,255,255,0.07); }

    .hero-hint {
      font-size:11px;
      color:#8fd4ff;
      text-align:right;
      min-height:14px;
      opacity:0.9;
    }

    /* =======================================================
       CHAT
    ======================================================= */

    .side-panel { width:260px; margin-left:10px; border-radius:20px; background:rgba(5,5,15,0.9); padding:10px; border:1px solid rgba(255,255,255,0.07); }
    #chat { flex:1; overflow-y:auto; display:flex; flex-direction:column; gap:4px; }

    .chat-line-dealer { color:#f7e496; }
    .chat-line-system { color:#8fd4ff; }

  </style>
</head>


<body>
<div class="page">

  <!-- HEADER -->
  <header class="topbar">
    <div class="topbar-row">

      <div style="display:flex; gap:10px; align-items:center;">
        <div class="logo-mark"></div>
        <div class="topbar-title-block">
          <div class="topbar-main">MIDNIGHT BLACK</div>
          <div class="topbar-sub" id="tableTitle">TABLE</div>
        </div>
      </div>

      <div class="topbar-right">

        <div class="topbar-actions">
          <button class="btn btn-icon" id="btnSettings">⚙</button>

          <!-- ДВЕ КНОПКИ — одна скрыта -->
          <button class="btn btn-join"  id="btnJoin">Сесть за стол</button>
          <button class="btn btn-leave" id="btnLeave" style="display:none;">Покинуть стол</button>
        </div>

        <div class="topbar-table-line">
          <span class="pill" id="tableName">Стол #MB-001</span>
          <span class="pill" id="tablePlayers">0 / 6 игроков</span>
        </div>

      </div>
    </div>
  </header>


  <!-- MAIN -->
  <main class="main">

    <!-- TABLE -->
    <section class="table-wrap">

      <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
        <div style="display:flex; gap:10px;">
          <div class="dot-live"></div>
          <div>
            <div id="tableInfo">Live</div>
            <div class="dealer-short" id="dealerShort"></div>
          </div>
        </div>

        <div style="display:flex; flex-direction:column; gap:2px;">
          <div class="pill" id="minBuyin">Мин. бай-ин: —</div>
          <div class="pill" id="maxBuyin">Макс. бай-ин: —</div>
        </div>
      </div>

      <div class="poker-table" id="table">
        <div class="poker-table-inner">

          <div id="pot">Банк: <span>0</span> MBC</div>
          <div id="board"></div>
          <div id="sidePots"></div>

        </div>

        <div id="players">

          <div class="seat seat-1" data-seat="1">
            <div class="seat-avatar">P1</div>
            <div class="seat-text"><span class="seat-name">Пусто</span><span class="seat-stack"></span></div>
          </div>

          <div class="seat seat-2" data-seat="2">
            <div class="seat-avatar">P2</div>
            <div class="seat-text"><span class="seat-name">Пусто</span><span class="seat-stack"></span></div>
          </div>

          <div class="seat seat-3" data-seat="3">
            <div class="seat-avatar">P3</div>
            <div class="seat-text"><span class="seat-name">Пусто</span><span class="seat-stack"></span></div>
          </div>

          <div class="seat seat-4" data-seat="4">
            <div class="seat-avatar">P4</div>
            <div class="seat-text"><span class="seat-name">Пусто</span><span class="seat-stack"></span></div>
          </div>

          <div class="seat seat-5" data-seat="5">
            <div class="seat-avatar">P5</div>
            <div class="seat-text"><span class="seat-name">Пусто</span><span class="seat-stack"></span></div>
          </div>

          <div class="seat seat-6" data-seat="6">
            <div class="seat-avatar">P6</div>
            <div class="seat-text"><span class="seat-name">Пусто</span><span class="seat-stack"></span></div>
          </div>

        </div>

        <div class="dealer-chip" id="dealerChip" style="display:none;">D</div>
      </div>

    </section>


    <!-- SIDE PANEL -->
    <section class="side-panel">
      <div style="display:flex; gap:6px;">
        <button class="pill" style="flex:1;">Чат</button>
      </div>

      <div style="flex:1; display:flex; flex-direction:column; gap:8px;">
        <div id="chat"></div>
        <div style="display:flex; gap:6px;">
          <input class="input" id="chatInput" placeholder="Сообщение…" />
          <button class="chat-send" id="chatSend">⮞</button>
        </div>
      </div>
    </section>

  </main>
</div>


<!-- socket.io -->
<script src="https://poker-server-f2et.onrender.com/socket.io/socket.io.js"></script>

<!-- main JS -->
<script src="/js/table.js"></script>

</body>
</html>
